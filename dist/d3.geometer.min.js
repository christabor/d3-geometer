var d3_geometer={version:"1.0.0"};d3_geometer.utils={},d3_geometer.utils.toRadian=function(a){return a>360&&(a=360),isNaN(a)?a:a*(Math.PI/180)},d3_geometer.utils.calculateAngleSum=function(a){return 180*(a-2)},d3_geometer.utils.calculateAngles=function(a,b){var c=d3_geometer.utils.calculateAngleSum(a)/a;return b?Math.round(c):c},d3_geometer.Protractor=function(a,b){function c(){var a="translate("+d3.event.x+","+d3.event.y+")";d3.select(this).attr("transform",a)}function d(){var a=d3.event.keyCode;o>360&&(o=0),38===a?o-=1:40===a&&(o+=1),e()}function e(){a.attr("transform"),",rotate("+Math.abs(o)+")"}function f(a){o=a,e()}var g,h,i=b||200,j=d3_geometer.utils.toRadian(180),k=d3.behavior.drag().on("drag",c),l=1,m=4,n=a.attr("id","protractor").call(k),o=0;return h=d3.svg.arc().innerRadius(20).outerRadius(i).startAngle(0).endAngle(j),g=d3.svg.arc().innerRadius(10).outerRadius(20).startAngle(0).endAngle(j),n.rotate=e,n.updateAngle=f,n.append("path").classed("protractor-bg",!0).attr("fill","white").attr("opacity",.3).attr("stroke","black").attr("stroke-width",m/2).attr("d",h),n.selectAll(".protractor-angle-0").data(d3.range(1)).enter().append("rect").classed("protractor-angle-0",!0).attr("fill","black").attr("width",m).attr("height",2*i).attr("y",-i).attr("x",-m/2),n.selectAll(".protractor-angle-90").data(d3.range(89,90)).enter().append("rect").classed("protractor-angle-90",!0).attr("fill","red").attr("width",i/1.4).attr("height",m).attr("y",-m/2).attr("x",0),n.selectAll(".protractor-angle").data(d3.range(1,180)).enter().append("rect").classed("protractor-angle",!0).attr("fill",function(a){return 90===a?"red":"black"}).attr("width",l).attr("opacity",.6).attr("height",function(a){return a%10===0?90===a?i/6:i:a%5===0?i/6:i/14}).attr("y",-i).attr("transform",function(a){return"rotate("+a+")"}),n.append("path").classed("protractor-arc-bottom",!0).attr("fill","black").attr("stroke-width",0).attr("stroke","none").attr("d",g),n.selectAll(".protractor-text-top").data(d3.range(19)).enter().append("text").classed("protractor-text-top",!0).attr("fill","black").attr("text-anchor","middle").attr("x",0).attr("y",-i-8).attr("font-size",function(a){return 90===a?30:15}).attr("transform",function(a){return"rotate("+10*a+")"}).text(function(a){return 10*a}),n.selectAll(".protractor-text-bottom").data(d3.range(1,18)).enter().append("text").classed("protractor-text-bottom",!0).attr("fill","black").attr("text-anchor","middle").attr("x",0).attr("y",-i/1.3).attr("font-size",11).attr("transform",function(a){return"rotate("+10*a+")"}).text(function(a){return 90!==a?180-10*a:""}),d3.select("body").on("keydown",d),e(),n},d3_geometer.CoordSpace=function(a,b,c){var d=10,e=1,f=null,g=null,h=null,i=null,j=d3.range(-c,c+1);f=d3.scale.linear().domain([d3.min(j),d3.max(j)]).range([d,b.width-d]),g=d3.scale.linear().domain([d3.min(j),d3.max(j)]).range([b.height-d,d]),h=d3.svg.axis().tickValues(j).scale(f).orient("bottom"),i=d3.svg.axis().tickValues(j).scale(g).orient("left"),a.append("g").attr("transform","translate(0,"+b.height/2+")").attr("id","xCoords").call(h),a.append("g").attr("transform","translate("+b.width/2+", 0)").attr("id","yCoords").call(i),a.append("g").attr("id","yCoordsLines").selectAll(".ycoord-line").data(j).enter().append("rect").attr("opacity",function(a){return 0===a?1:.1}).attr("y",b.width/2).attr("width",function(a){return 0===a?3*e:e}).attr("height",b.height).attr("x",f).attr("y",0),a.append("g").attr("id","xCoordsLines").selectAll(".xcoord-line").data(j).enter().append("rect").attr("y",b.height/2).attr("opacity",function(a){return 0===a?1:.1}).attr("width",b.width).attr("height",function(a){return 0===a?3*e:e}).attr("x",0).attr("y",g),a.select("#xCoords").select(".domain").style("display","none"),a.select("#yCoords").select(".domain").style("display","none")},d3_geometer.NGon=function(a){function b(){for(var b=["ngon-labels","ngon-dash-edges","ngon-angles","ngon-vertices","ngon-right-angles"],c=0,d=b.length;d>c;c++)a.append("g").attr("class",[w,b[c]].join(" "))}function c(d,e){return a=a||d3.select("svg").append("g"),s=d,t=e,u=c.getCoords(d,e),r=a.selectAll(".ngon").data([u]).enter().append("path").attr("stroke-width",A).attr("stroke",y).attr("fill",z).attr("opacity",1).attr("d",function(a){return H(a)+"Z"}),b(),c}function d(b,d){var e="translate("+[b,d].join(", ")+")";return a.attr("transform",e),c}function e(b,d){return a.select(d).attr("transform","rotate("+b+")"),c}function f(){r.remove(),a.selectAll("g").remove()}function g(){var a=0,b=d3_geometer.utils.calculateAngles(t,!0);return d3.range(t).map(function(){return a+=b}),a}function h(a,b){return d3.range(b).map(function(c){var d=0,e=0,f=0,g=x/b,h=f+c*g,i=Math.round(d+a*Math.cos(h)),j=Math.round(e-a*Math.sin(h));return{label:"L"+c,x:i,y:j}})}function i(b,d,e){return a.select(".ngon-labels").append("text").classed("custom-label",!0).text(b).attr("x",d||0).attr("y",e||0),c}function j(){return a.select(".ngon-labels").selectAll(".label").data(r.datum()).enter().append("text").classed("label",!0).text(function(a){return a.label}).attr("x",function(a){return a.x-(B+B/2)}).attr("y",function(a){return a.y-(B+B/2)}),c}function k(){return a.select(".ngon-vertices").selectAll(".vertex").data(r.datum()).enter().append("circle").classed("vertex",!0).attr("r",0).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}).transition().delay(function(a,b){return 100*b}).attr("r",B),c}function l(b,d){return a.select(".ngon-right-angles").append("rect").attr("class","right-angle").attr("x",b).attr("y",d).attr("stroke-width",A/2).attr("stroke",F).attr("fill",G).attr("opacity",E).attr("width",3*B).attr("height",3*B),c}function m(b,d,e,f){f||(f=0);var g=d3.svg.arc().innerRadius(C).outerRadius(D).startAngle(0).endAngle(d3_geometer.utils.toRadian(b));return a.select(".ngon-angles").append("g").attr("transform","translate("+d+","+e+"), rotate("+f+")").append("path").attr("class","ngon-angle").attr("stroke-width",A/2).attr("stroke",F).attr("fill",G).attr("opacity",E).attr("d",g),a.select(".ngon-angles").append("text").classed("ngon-angle-text",!0).attr("x",d+5).attr("y",e+20).attr("fill","black").attr("font-size",10).text(Math.abs(b)+"Â°"),c}function n(){var a=d3_geometer.utils.calculateAngles(t,!0),b=d3.select(".ngon-vertices").selectAll(".vertex"),d=360/t;if(!b)throw new Error("Must apply vertices before angles are calculated.");return b.each(function(b,e){var f=e+(t/2-.5),g=-d*f;c.drawAngle(a,b.x,b.y,g)}),c}function o(a){function b(a,b,c){a.push({x:d[c].x,y:d[c].y,label:"C"+c}),a.push({x:d[e-b].x,y:d[e-b].y,label:"C"+(e-b)})}var d=r.datum(),e=d.length;return 3>e?void 0:(v=d3.range(e).map(function(c,d){for(var f=[],g=1;e-1>g;g++)a?g%a===0&&b(f,g,d):b(f,g,d);return f}),c)}function p(b){return a.select(".ngon-vertices").append("circle").attr("class","center-vertex").attr("r",0).attr("cx",0).attr("cy",0).transition().delay(function(a,b){return 100*b}).attr("r",B),b&&a.select(".ngon-labels").append("text").attr("class","center-vertex-label").text(function(){return"O1"}).attr("x",B+B/2).attr("y",B),c}function q(b,d){return b||(c.calculateEdgeOffsets(d),b=v),a.select(".ngon-dash-edges").selectAll(".dashed").data(b).enter().append("path").attr("stroke-width",A/2).attr("stroke",y).attr("fill","none").attr("d",H),c}if(!d3)return console.error("d3 library not found :sadface:");var r=null,s=null,t=null,u=null,v=[],w="d3_geometer",x=2*Math.PI,y="#b66d48",z="#f4eae5",A=3,B=6,C=10,D=4*B,E=.8,F="#689452",G="#acf287",H=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y});return c.move=d,c.rotate=e,c._destroy=f,c.sumTotalInteriorAngles=g,c.getCoords=h,c.label=i,c.drawLabels=j,c.drawVertices=k,c.drawRightAngle=l,c.drawAngle=m,c.drawPerimeterInteriorAngles=n,c.calculateEdgeOffsets=o,c.drawCenterPoint=p,c.drawNearAdjacentEdges=q,c};